/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/7.5.1/samples
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    // id "com.moowork.node" version "1.2.0"
    id "com.github.node-gradle.node" version "3.1.1"
}

node {
    download = true
}

task build

task zip(type: Zip) {
            from ('.') {
                include "*"
                include "bin/**"
                include "data/**"
                include "node_modules/**"
                include "public/**"
                include "routes/**"
                include "views/**"
            }
            destinationDir(file("dist"))
            baseName "react-app"
        }

build.dependsOn zip
zip.dependsOn npm_build
build.dependsOn npm_build
npm_build.dependsOn npmInstall


// task bundle(type: NpmTask, dependsOn: npmInstall) {
//     args = ['run', 'build']
// }

// assemble.dependsOn(bundle)